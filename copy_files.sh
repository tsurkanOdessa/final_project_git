#!/bin/bash

# 1. Запрос исходной и целевой директории у пользователя
read -p "Введите путь к исходной директории: " src_dir
read -p "Введите путь к целевой директории: " dest_dir

# 2. Запрос расширения файлов, которые нужно скопировать
read -p "Введите расширение файлов (например, txt): " extension

# 3. Проверка существования исходной директории
if [ ! -d "$src_dir" ]; then
  echo "Исходная директория не существует."
  exit 1
fi

# 4. Проверка существования целевой директории
if [ ! -d "$dest_dir" ]; then
  echo "Целевая директория не существует. Создаем..."
  mkdir -p "$dest_dir"
fi

# 5. Проверить наличие файлов с указанным расширением в исходной директории
files=($(find "$src_dir" -type f -name "*.$extension"))
if [ ${#files[@]} -eq 0 ]; then
  echo "Файлы с расширением .$extension в исходной директории не найдены."
  exit 1
fi

# 6. Вывод общего количества найденных файлов в исходной директории
echo "Найдено ${#files[@]} файлов с расширением .$extension в исходной директории."

# 7. Копирование файлов с указанным расширением в целевую директорию
for file in "${files[@]}"; do
  cp "$file" "$dest_dir"
done
echo "Файлы скопированы в целевую директорию."

# 8. Подсчет общего количества файлов в целевой директории
file_count=$(find "$dest_dir" -type f | wc -l)
echo "Общее количество файлов в целевой директории: $file_count."

# 9. Финальное сообщение
echo "Готово."
